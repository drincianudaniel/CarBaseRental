@model CarBase.Models.vehicle

@{
    ViewBag.Title = "Cars";
}

@section Scripts{
     <script type="text/javascript">
     $(function(){
         GetVehicles();
         $("#txtsearchName").keyup(function(){
             GetVehicles();
         });
     });
        function GetVehicles() {
            var searchName = $.trim($("#txtsearchName").val());

            $.ajax({
                url: `/Cars/searchCars/${searchName}`,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    console.log(response);
                    console.log(response["$values"]);
                    $(".cars").html("");
                    response["$values"].forEach(function(value)
                    {
                         $(".cars").append('<div class="card"> <ul class = "body"> <li class="header"> '+ '<li class = "author">'+ value.make.name + '</li>' + '<li class = "author">'+ value.model + '</li>' +  '<li class = "author">'+ value.engine.type + " " + value.engine.size + '</li>' + '<li class = "author">'+ value.type.name + '</li>' + '</li> </ul> <center> <img class="imagine" src="'+ value.img_url +'"> </center> <a href="/Cars/DeleteCar/'+ value.vehicleID +'">Delete</a> <a href="/Cars/CarsDetails/'+ value.vehicleID +'" > View Details </a> </div>');
                    });
                },
                error: function (error) {
                    $(this).remove();
                    console.log(error);
                }
            });
        }
    </script>
}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/cars.css">


    <title>CarBase Rental</title>
</head>
<body>


 <div class="banner">

        <div class="content"> 
            <div class="searchbox">
                    <input class="searchbar" id="txtsearchName" name="searchName" type="text" value=""> 
            </div>
            <div class="columns">
                <div class="subheader">
                    <a asp-controller="Cars" asp-action="CarsManage">Insert Car</a>
                    <a asp-controller="Cars" asp-action="EngineInsert">Insert Engine</a>
                    <a asp-controller="Cars" asp-action="MakeInsert">Insert Make</a>
                    <a asp-controller="Cars" asp-action="TypeInsert">Insert Type</a>
                </div>

                    <div class = "user-cards">
                        <div class="border-cards cars delete">
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

</body>
</html>
